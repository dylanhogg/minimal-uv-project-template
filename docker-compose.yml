services:
  app:
    build: .
    working_dir: /app
    env_file: .env
    volumes:
      - .:/app
      - uv_cache:/root/.cache/uv
      - ./log:/app/log
    command: ["reqarg1", "--optional-arg", "optarg1"]

  tests:
    build: .
    working_dir: /app
    env_file: .env
    volumes:
      - .:/app
      - uv_cache:/root/.cache/uv
    entrypoint: ["uv", "run", "pytest", "-q"]

volumes:
  uv_cache:
